name: Test Code-Signing 
on: workflow_dispatch

jobs:
  code-sign:
    runs-on: sw-ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: API call to download csg cli
      uses: sherwin-williams-co/sw-fetch-gh-request-action@master
      with:
        repo: "Corp-IS-InfoSec/csg-cli"
        version: "tags/v1.0.1"
        file: "csg-cli-linux-amd64-v1.0.1.tar.gz"
        target: "subdir/csg-cli-linux-amd64-v1.0.1.tar.gz"
        token: ${{ secrets.GHES_PAT }}
      
    - name: export CSG Address
      run: export CSG_ADDR=https://csg.sherwin.com
    
    - name: Login using cli (csg profiles)
      run: |
        csg profiles -u ${{ secrets.CSG_USERNAME }} -p ${{ secrets.CSG_PASSWORD }}
    
#     - name: Sign jar file
#       run: |
#         csg sign -f <file_path> -g <group_id> -i <sign_id> -u 
